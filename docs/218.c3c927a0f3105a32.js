"use strict";(self.webpackChunkSellerBoardFE=self.webpackChunkSellerBoardFE||[]).push([[218],{4218:(k,r,l)=>{l.r(r),l.d(r,{SettingModule:()=>A});var c=l(6814),f=l(1896),t=l(5879),s=l(5313),_=l(6593),C=l(9372),x=l(2425),u=l(617),m=l(5940),g=l(2296);const M=["fileUpload"];function O(i,o){1&i&&(t.TgZ(0,"p",14),t._uU(1,"File is required."),t.qZA())}function b(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"File Name"),t.qZA())}function P(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.hij(" ",n.fileName," ")}}function U(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Created Date"),t.qZA())}function v(i,o){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.Oqu(n.createdDate)}}function D(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Status"),t.qZA())}function y(i,o){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.Oqu(n.status)}}function w(i,o){1&i&&t._UZ(0,"tr",28)}function F(i,o){1&i&&t._UZ(0,"tr",29)}function Z(i,o){if(1&i&&(t.TgZ(0,"div",15)(1,"table",16),t.ynx(2,17),t.YNc(3,b,2,0,"th",18),t.YNc(4,P,2,1,"td",19),t.BQk(),t.ynx(5,20),t.YNc(6,U,2,0,"th",18),t.YNc(7,v,2,1,"td",21),t.BQk(),t.ynx(8,22),t.YNc(9,D,2,0,"th",18),t.YNc(10,y,2,1,"td",21),t.BQk(),t.YNc(11,w,1,0,"tr",23),t.YNc(12,F,1,0,"tr",24),t.qZA()()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns)}}function T(i,o){1&i&&(t.TgZ(0,"div",30),t._UZ(1,"mat-spinner"),t.qZA())}let S=(()=>{class i{constructor(n,e,a,d){this.sanitizer=n,this.userService=e,this.toastr=a,this.datePipe=d,this.displayedColumns=["fileName","createdDate","status"],this.buttonClicked=!1,this.files=[],this.inputFileName="",this.fileData="",this.isLoaderShow=!1,this.filelistData=[]}ngOnInit(){const n=localStorage.getItem("authToken");if(n){const e=JSON.parse(n);e&&e.currentUserId&&(this.getUserId=e.currentUserId)}this.getFileData(this.getUserId)}onNoClick(){}onClick(n){this.fileUpload&&this.fileUpload.nativeElement.click()}onFileSelected(n){const e=n.target.files[0];e&&(this.inputFileName=e.name,this.fileData=e.name);let a=n.dataTransfer?n.dataTransfer.files:n.target.files;for(let p=0;p<a.length;p++){let h=a[p];this.validate(h)&&(h.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(a[p])),this.isMultiple()||(this.files=[]),this.files.push(a[p]))}this.fileData=a}clearInputElement(){this.fileUpload.nativeElement.value=""}isMultiple(){return this.multiple}validate(n){for(const e of this.files)if(e.name===n.name&&e.lastModified===n.lastModified&&e.size==e.size&&e.type==e.type)return!1;return!0}ImportHistoricalData(){if(this.buttonClicked=!0,this.fileData){this.isLoaderShow=!0;const n=new FormData;n.append("files",this.fileData[0],this.fileData[0].name),n.append("CreatedByUserId",String(this.getUserId)),n.append("UserId",String(this.getUserId)),n.append("IsApproved",JSON.stringify(!1)),this.userService.ImportHistoricalData(n).subscribe(e=>{e&&null!=e.payload&&e.isSuccess&&e.payload>0&&(this.toastr.success("File Uploaded Sucessfully !!","Success",{timeOut:3e3}),this.isLoaderShow=!1,this.getFileData(this.getUserId),this.inputFileName="",this.buttonClicked=!1,this.fileData="")},e=>{this.isLoaderShow=!1,e&&e.error?alert(e?.error?.errorMessage):alert("Oops some error occured."),this.onNoClick()})}}formatDate(n){return this.datePipe.transform(n,"yyyy-MM-dd")}getFileData(n){this.userService.GetUserHistoricalDataFileList(n)?.subscribe(e=>{if(e&&null!=e&&null!=e.payload&&e.payload){this.filelistData=e.payload;for(let a of this.filelistData){const d=this.formatDate(a.createdDate);a.createdDate=d}this.dataSource=new s.by(this.filelistData)}})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(_.H7),t.Y36(C.K),t.Y36(x._W),t.Y36(c.uU))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-file-uploadlist"]],viewQuery:function(e,a){if(1&e&&t.Gf(M,5),2&e){let d;t.iGM(d=t.CRH())&&(a.fileUpload=d.first)}},inputs:{multiple:"multiple",files:"files"},features:[t._Bn([c.uU])],decls:21,vars:5,consts:[[1,"fileDailog_wrapper"],[1,"dialog_heading"],[1,"top-header"],[1,"title-name"],[1,"file-upload-box"],[1,"upload-file"],["id","ulopad-file","type","file",3,"change"],["fileUpload",""],["for","ulopad-file",1,"upload-text"],[1,"upload-text-inner"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","validation",4,"ngIf"],["class","fileData mat-elevation-z8 cms-table",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"validation"],[1,"fileData","mat-elevation-z8","cms-table"],["mat-table","",3,"dataSource"],["matColumnDef","fileName"],["mat-header-cell","","class","t-head",4,"matHeaderCellDef"],["mat-cell","","class","nameEllipsis",4,"matCellDef"],["matColumnDef","createdDate"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"t-head"],["mat-cell","",1,"nameEllipsis"],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"spinner-container"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"File Upload"),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5)(7,"input",6,7),t.NdJ("change",function(p){return a.onFileSelected(p)}),t.qZA(),t.TgZ(9,"label",8)(10,"mat-icon"),t._uU(11,"cloud_upload"),t.qZA(),t.TgZ(12,"span",9),t._uU(13),t.qZA()()(),t.TgZ(14,"button",10),t.NdJ("click",function(){return a.ImportHistoricalData()}),t.TgZ(15,"mat-icon"),t._uU(16,"upload"),t.qZA(),t._uU(17,"Upload "),t.qZA(),t.YNc(18,O,2,0,"p",11),t.qZA()(),t.YNc(19,Z,13,3,"div",12),t.YNc(20,T,2,0,"div",13),t.qZA()),2&e&&(t.xp6(13),t.hij("",a.inputFileName?a.inputFileName:"upload file"," "),t.xp6(1),t.Q6J("disabled",a.buttonClicked&&!a.inputFileName),t.xp6(4),t.Q6J("ngIf",!a.inputFileName&&a.buttonClicked),t.xp6(1),t.Q6J("ngIf",a.filelistData.length>0),t.xp6(1),t.Q6J("ngIf",a.isLoaderShow))},dependencies:[c.O5,u.Hw,m.Ou,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,g.lW],styles:['.p-2[_ngcontent-%COMP%]{padding:20px}.input_fileupload--hidden[_ngcontent-%COMP%]{display:none}.t-head[_ngcontent-%COMP%]{font-size:1rem;color:#000;font-weight:500;text-align:start}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;position:fixed;inset:0;background-color:#00000080}.fileData[_ngcontent-%COMP%]{box-shadow:none;overflow:hidden;overflow-y:auto;width:100%;min-width:500px;max-height:500px}.fileData[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-bottom:0}.fileData[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.fileData[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding-top:8px!important}.fileData[_ngcontent-%COMP%]     .mat-mdc-table{white-space:nowrap;overflow:auto!important}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-collapse:collapse;padding:8px}.nameEllipsis[_ngcontent-%COMP%]{white-space:nowrap!important;max-width:200px!important;overflow:hidden!important;text-overflow:ellipsis!important}  .mdc-dialog__content>:last-child{float:right}.fileData[_ngcontent-%COMP%]   .mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:none!important}.close[_ngcontent-%COMP%]{padding:20px 30px 20px 24px;float:right}.close[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.action-btn[_ngcontent-%COMP%]{background-color:#ff4081;border:none;color:#fff;border-radius:5px;padding:5px 10px 0 5px;display:flex;align-items:center}.action-btn[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{margin-bottom:4px}.action-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:19px}.fileDailog_wrapper[_ngcontent-%COMP%]{padding:30px 15px}.top-header[_ngcontent-%COMP%]   h3.title-name[_ngcontent-%COMP%]{font-size:30px;padding-bottom:15px;position:relative;display:inline-block;font-weight:500;letter-spacing:.5px}.top-header[_ngcontent-%COMP%]   h3.title-name[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:100%;height:2px;background-color:#303f9f;max-width:80%;width:100%;margin:auto;border-radius:10px}.file-upload-box[_ngcontent-%COMP%]{padding-top:30px;position:relative;padding-bottom:30px;display:inline-block}.file-upload-box[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]{display:inline-flex}.file-upload-box[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.file-upload-box[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]{padding:15px 30px;border:1px dashed gray}.file-upload-box[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .file-upload-box[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   .upload-text-inner[_ngcontent-%COMP%]{vertical-align:middle}.file-upload-box[_ngcontent-%COMP%]   .upload-file[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   .upload-text-inner[_ngcontent-%COMP%]{padding-left:15px;font-size:16px;text-transform:capitalize;font-weight:500}.file-upload-box[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{height:50px;margin-left:15px}.file-upload-box[_ngcontent-%COMP%]   .validation[_ngcontent-%COMP%]{color:red;font-size:.8rem;margin:5px 15px;position:absolute;left:0;bottom:0;right:0}']})}return i})();const N=[{path:"",component:(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-main-section"]],decls:1,vars:0,template:function(e,a){1&e&&t._UZ(0,"app-file-uploadlist")},dependencies:[S]})}return i})()}];let I=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(N),f.Bz]})}return i})(),A=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[c.ez,I,u.Ps,m.Cq,s.p0,g.ot]})}return i})()}}]);